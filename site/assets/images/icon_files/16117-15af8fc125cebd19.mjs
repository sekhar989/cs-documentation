"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[16117],{178467:(e,t,n)=>{n.d(t,{ZP:()=>P,sE:()=>A,jV:()=>B});var a=n(441143),r=n.n(a),l=n(244311);let o=/(EXP\d?|ADSHQ|AVC|DASH|MANI|HIGHQUAL|HEVC|HLS|H265|H264|720P?|MP4|ENABLED|CONTROL|PROD|T\d|Q?VBR\d*|AUTOABR|MEDIACONVERT|QUALITY|REARRANGED|REMHIGHRES|VISIONULAR|480$|640$|V2$|\dSEC$|\d\d0P\d\d0K$)/g,i={vDASHHEVCSLCONTROL:"V_DASH_HEVC_SL_CONTROL",vHLSHEVC2SEC:"V_HLS_HEVC_2_SEC",vHLSHEVCSLCONTROL:"V_HLS_HEVC_SL_CONTROL",vHLSSINGLEFILECMAFEXP:"V_HLS_SINGLE_FILE_CMAF_EXP",vHLSSINGLEFILECONTROL:"V_HLS_SINGLE_FILE_CONTROL",vHLSSINGLEFILETSEXP:"V_HLS_SINGLE_FILE_TS_EXP",vHLSSLCONTROL:"V_HLS_SL_CONTROL",vHLSV3:"V_HLSV3",vHLSV3EXP:"V_HLSV3_EXP",vHLSV3MOBILE:"V_HLSV3_MOBILE",vHLSV3WEB:"V_HLSV3_WEB",vHLSV4:"V_HLSV4",vLOWBITRATEEXPHLSHEVCCONTROL:"V_LOW_BITRATE_EXP_HLS_HEVC_CONTROL",vLOWBITRATEEXPHLSHEVCLOB:"V_LOW_BITRATE_EXP_HLS_HEVC_LOB",vLOWBITRATEEXPHLSHEVCLQS:"V_LOW_BITRATE_EXP_HLS_HEVC_LQS"},c=e=>{var t;return null!==(t=i[e])&&void 0!==t?t:e.replace(o,"_$1").replace(/(\d\d0P)(\d\d0K)/,"$1_$2").replace(/QVBR(8|10)/,"QVBR_$1").replace("ADSHQ","ADS_HQ").replace("HIGHQUAL","HIGH_QUAL").replace("REMHIGHRES","REM_HIGH_RES").replace(/^v/,"V")},u=e=>e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`),s=e=>e.replace(/^_/,""),d=e=>s(u(e)),p=e=>"entityId"===e?"id":d(e),y=({gqlFieldName:e,concreteType:t,parentConcreteType:n})=>{if("StoryPinPage"===n){if("images"===e)return"image";if("imagesAdjusted"===e)return"image_adjusted"}return"PinTagChipImagesPerSpec"===n&&"image"===e?"images":"VideoDetail"===t?c(e):"reactionCountsData"===e?"reaction_counts":d(e)},g=({gqlFieldName:e,legacyValue:t})=>{switch(e){case"reactionType":return"string"==typeof t?Number(t):t;case"campaignId":case"pinPromotionId":return"number"==typeof t?String(t):t;default:return t}},S=({untypedInput:e,concreteType:t})=>{if(!e)return null;switch(r()("object"==typeof e,"legacy data must be an object"),t){case"ReactionCountModel":return Object.entries(e).map(([e,t])=>({reaction_type:e,reaction_count:t}));case"PinThroughProperties":return Object.entries(e).map(([e,t])=>({key:e,data:t}));default:if(Array.isArray(e))return e;return Object.entries(e).map(([e,t])=>({key:e,value:t}))}},L=({args:e,name:t})=>{let n=e.find(e=>e.name===t);return n&&"string"==typeof n.value?n.value:null},_=({untypedInput:e,parentConcreteType:t,selection:n})=>{let{args:a,name:l}=n;if("PinTagChipImagesPerSpec"===t&&"image"===l){var o;return null==e?void 0:null===(o=e.images)||void 0===o?void 0:o["750x"]}let i=null==e?void 0:e[y({gqlFieldName:l,concreteType:n.concreteType,parentConcreteType:t})];if(!i)return i;let c=L({args:null!=a?a:[],name:"spec"});if(c){if(r()("object"==typeof i,"value must be an object"),"StoryPinPage"===t){let{dominant_color:e,images:t}=i;if(!t)return t;r()("object"==typeof t,"images must be an object");let n=t["orig"===c?"originals":c];return n&&e?{...n,dominant_color:e}:n}return i[c]}return i},m={HeadingBlock:"StoryPinHeadingBlock",IngredientBlock:"StoryPinIngredientBlock",InstantContentURLNavigateAction:"InstantContentActionUrlNavigate",InstantContentHeaderBlock:"InstantContentHeader",InstantContentParagraphBlock:"InstantContentParagraph",InstantContentTextBlock:"InstantContentText",InstantContentHeadingBlock:"InstantContentHeading",InstantContentImageBlock:"InstantContentImage",InstantContentVideoBlock:"InstantContentVideo",InstantContentTableBlock:"InstantContentTable",InstantContentGroupBlock:"InstantContentGroup",InstantContentOrderedListBlock:"InstantContentOrderedList",InstantContentUnorderedListBlock:"InstantContentUnorderedList",InstantContentSectionBlock:"InstantContentSection",InstantContentSeparatorBlock:"InstantContentSeparator",InstantContentUserBlock:"InstantContentUser",InstantContentWebBlock:"InstantContentWeb",InstantContentPromotedWebBlock:"InstantContentPromotedWeb",LinkBlock:"StoryPinLinkBlock",ParagraphBlock:"StoryPinParagraphBlock",SupplyBlock:"StoryPinSupplyBlock",TextBlock:"StoryPinTextBlock"},E=({gqlConcreteTypeName:e,legacyTypeName:t})=>{var n;return(null!==(n=m[e])&&void 0!==n?n:e).toLowerCase()===t},f={0:"ParagraphBlock",1:"HeadingBlock",2:"StoryPinImageBlock",3:"StoryPinVideoBlock",4:"LinkBlock",5:"IngredientBlock",6:"SupplyBlock",7:"StoryPinListBlock",8:"StoryPinKeyValueBlock",9:"TextBlock",11:"StoryPinMusicBlock",12:"StoryPinMentionStickerBlock",13:"StoryPinProductStickerBlock",14:"StoryPinStaticStickerBlock",15:"StoryPinAnimatedStickerBlock",16:"StoryPinCommentReplyBlock",17:"StoryPinVirtualTryOnMakeupStickerBlock",18:"StoryPinAdBlock",19:"StoryPinGenericInteractiveStickerBlock"},C=e=>"string"==typeof e.type?e.type.replace(/_/g,"").toLowerCase():"number"==typeof e.block_type?f[e.block_type].toLowerCase():void 0;var k=n(67347);let I=new Map;function h(e,t,n){let a=e.get(t);if(null!=a)return a;{let a=n();return e.set(t,a),a}}let A=Symbol("fragmentSpread"),H=({untypedInput:e,mutableOutput:t,selections:n,parentType:a,conditionContext:l,fragmentName:o,path:i})=>{n.forEach(n=>{switch(n.kind){case"ScalarField":{let{alias:l,name:o}=n;r()(!("__typename"===o&&null==a),"We do not support selecting __typename directly on interface fields. Contact @jackhsu or @robertbalicki"),t[null!=l?l:o]="__typename"===o?a:g({gqlFieldName:o,legacyValue:null==e?void 0:e[p(o)]});break}case"LinkedField":{let{alias:u,name:s,concreteType:d,plural:p,selections:y}=n,g=null!=u?u:s,L=_({untypedInput:e,selection:n,parentConcreteType:a});if(null==L){t[g]=L;return}if(p){let e=S({untypedInput:L,concreteType:d}),n=t[g];r()(!n||Array.isArray(n),"plural data must be an array"),t[g]=null==e?void 0:e.map((e,t)=>{var a;let r=null!==(a=null==n?void 0:n[t])&&void 0!==a?a:{};return H({conditionContext:l,untypedInput:e,mutableOutput:r,parentType:d,selections:y,fragmentName:o,path:i+"."+s}),r})}else{var c;r()("object"==typeof L,`Value for ${s} must be an object${d?` with type ${d}`:""}, but a ${typeof L} is given`);let e=null!==(c=t[g])&&void 0!==c?c:{};t[g]=e,H({conditionContext:l,untypedInput:L,mutableOutput:e,parentType:d,selections:y,fragmentName:o,path:i+"."+s})}break}case"InlineFragment":{let{abstractKey:a,type:c,selections:u}=n;if(r()(null!=c&&null===a,"We only support using inline fragment to refine to concrete types for now. Contact @jackhsu or @robertbalicki"),null==e)break;let s=C(e);null!=s&&E({gqlConcreteTypeName:c,legacyTypeName:s})&&H({conditionContext:l,untypedInput:e,mutableOutput:t,parentType:c,selections:u,fragmentName:o,path:i}),null==s&&function(e,t,n){let a=h(I,e,()=>new Map),r=h(a,t,()=>new Set);r.has(n)||(r.add(n),(0,k.nP)("autoLegacyAdapter.missingTypeField",{sampleRate:1,tags:{fragmentName:e,path:t,concreteChildType:n}}))}(o,i,c);break}case"Condition":{let{condition:r,selections:c}=n,u=!0;"isAuth"===r?u=l.isAuth===n.passingValue:"isDesktop"===r&&(u=l.isDesktop===n.passingValue),u&&H({conditionContext:l,untypedInput:e,mutableOutput:t,parentType:a,selections:c,fragmentName:o,path:i});break}case"FragmentSpread":t[A]=e;break;case"Defer":case"Stream":case"ActorChange":case"FlightField":case"ModuleImport":case"RelayResolver":case"RequiredField":case"ClientExtension":case"RelayLiveResolver":case"AliasedFragmentSpread":case"ClientEdgeToClientObject":case"ClientEdgeToServerObject":case"InlineDataFragmentSpread":case"AliasedInlineFragmentSpread":throw Error(`The selection type '${n.kind}' is not supported yet. Contact @jackhsu or @robertbalicki`);default:throw Error(`Unexpected selection type '${n.kind}'`)}})};function P({conditionContext:e,fragment:t,legacyData:n}){let a=(0,l.getFragment)(t),o=null==a.abstractKey;if(o){let e=null!=n?C(n):null;null!=e&&r()(E({gqlConcreteTypeName:a.type,legacyTypeName:e}),`fragment data type '${a.type}' does not match legacy data type '${e}'. See http://pinch.pinadmin.com/fragment-data-type-does-not-match-legacy-data-type.`)}let i={};return H({conditionContext:e,untypedInput:n,mutableOutput:i,parentType:a.type,selections:a.selections,fragmentName:a.name,path:""}),i}function B(e,t){return e[A]=t,e}},681669:(e,t,n)=>{n.d(t,{qH:()=>I,Zm:()=>m,HF:()=>C,sr:()=>k,V4:()=>f});var a=n(702664),r=n(167912),l=n(178467);function o(e){return null==e?"null or undefined":Array.isArray(e)?"Array":typeof e}function i(e,t,n){return{path:e,message:`Value found only in ${"Manual"===t?"legacy adapter":"auto-legacy adapter"}, where it had type ${o(n)}. (Or it was null in the ${"Manual"===t?"auto-legacy adapter":"legacy adapter"}.)`,kind:"MissingItem"}}function c(e,t,n){let a=o(t),r=o(n);return{path:e,message:`Found item of type ${a} in the legacy adapter result, and an item of type ${r} in the auto-legacy result.`,kind:"Type"}}var u=n(773285),s=n(780280),d=n(50286),p=n(350118),y=n(395164),g=n(67347);let S={},L=new Set,_=new Set;function m(e,t,{useGraphQLAdapter:n,useLegacyAdapter:a}){if("deprecated"===t.type)return{data:a(t.data),childDataKey__DEPRECATED:t};let l=(0,r.useFragment)(e,t.data);return{data:n(l),childDataKey__DEPRECATED:{type:"graphqlRef",data:l}}}let E=()=>{let{isAuthenticated:e}=(0,s.B)(),t=(0,d.HG)();return{isAuth:!!e,isDesktop:t}};function f(e,t){let{checkExperiment:n}=(0,u.F)(),{isAuthenticated:a}=(0,s.B)(),{group:r,anyEnabled:d}=n(a?"web_graphql_auto_legacy_adapters_auth":"web_graphql_auto_legacy_adapters_unauth"),p=E();return r.includes("parallel")?n=>{let a=(0,l.jV)(t(n),n);return"object"==typeof window&&function(e,t,n,a){let r;try{r=(0,l.ZP)({conditionContext:t,fragment:e,legacyData:n})}catch(a){L.has(e.name)||(L.add(e.name),window.SHOULD_LOG_ADAPTER_DIFFERENCES&&console.warn(`autoLegacyAdapter threw for fragment ${e.name}`),(0,g.nP)("autoLegacyAdapter.erroredReadResults",{sampleRate:1,tags:{fragmentName:e.name,rootId:null==n?void 0:n.id,rootType:null==n?void 0:n.type,url:window.location.href,isAuth:t.isAuth}}),(0,y.T)({message:`[autoLegacyAdapter.${e.name}] - ${a.message}`,name:a.name,stack:a.stack}));return}try{var u,s;let t=(u=r,function e(t,n,a){let r=[],l=Object.keys(n),u=Object.keys(a);for(let u of l){let l=n[u],s=a[u];r.push(...function t(n,a,r){return null!=a&&null==r?[i(n,"Manual",a)]:a===r||null==a&&null==r?[]:Array.isArray(a)?Array.isArray(r)?function(e,n,a){if(n.length!==a.length)return[{path:e,message:`legacyResult is an array of length ${n.length}; autoLegacyResult is an array of length ${a.length}`,kind:"Length"}];let r=[];for(let l=0;l<n.length;l+=1){let o=n[l],i=a[l];r.push(...t(`${e}[]`,o,i))}return r}(n,a,r):[c(n,a,r)]:"object"==typeof a?"object"==typeof r&&null!==r&&null!==a?e(n,a,r):[c(n,a,r)]:[typeof a!=typeof r?c(n,a,r):{path:n,message:`Found items of type ${o(a)}, but their values did not match.`,kind:"Value"}]}(`${t}.${u}`,l,s))}for(let e of u){let l=n[e],o=a[e];null!=o&&null==l&&r.push(i(`${t}.${e}`,"Auto",o))}return r}("",a,u));if(t.length>0){window.SHOULD_LOG_ADAPTER_DIFFERENCES&&console.warn({differences:t,fragment:e.name}),S[e.name]=null!==(s=S[e.name])&&void 0!==s?s:new Set;let n=S[e.name];for(let a of t)n.has(a.path)||(n.add(a.path),(0,g.nP)("autoLegacyAdapter.inconsistentReadResults",{sampleRate:1,tags:{fragmentName:e.name,path:a.path,kind:a.kind}}))}}catch(t){_.has(e.name)||(_.add(e.name),window.SHOULD_LOG_ADAPTER_DIFFERENCES&&console.warn(`comparing results threw for fragment ${e.name}`),(0,g.nP)("autoLegacyAdapter.erroredCompareResults",{sampleRate:1,tags:{fragmentName:e.name}}))}}(e,p,n,a),a}:d?t=>(0,l.ZP)({conditionContext:p,fragment:e,legacyData:t}):e=>(0,l.jV)(t(e),e)}function C(e,t,n){let r;switch(n.type){case"article":r=e=>{let t=(0,a.useSelector)(({articles:t})=>t[e]);return t?n.useLegacyAdapter(t):null};break;case"story":r=e=>{let t=(0,a.useSelector)(({stories:t})=>t[e]);return t?n.useLegacyAdapter(t):null};break;default:r=e=>{let t=(0,p.S6)()(e);return t?n.useLegacyAdapter(t):null}}return m(e,t,{useGraphQLAdapter:n.useGraphQLAdapter,useLegacyAdapter:r})}function k(e,t,n){let a=f(e,n.useLegacyAdapter);return C(e,t,{...n,useGraphQLAdapter:e=>e,useLegacyAdapter:a})}let I=void 0},916117:(e,t,n)=>{n.d(t,{u:()=>o});var a=n(422578),r=n(178467),l=n(681669);function o(e,t,{useLegacyAdapter:n}){if(null==t)return{data:null,childDataKey__DEPRECATED:null};let o=function(e){let t=e[r.sE];return null!=t?{type:"deprecated",data:t}:e}(t);if("deprecated"===o.type){let{data:t}=o;return null==t?{data:null,childDataKey__DEPRECATED:o}:{data:(0,l.V4)(e,n)(t),childDataKey__DEPRECATED:o}}let i=(0,a.useFragment)(e,o.data);return{data:i,childDataKey__DEPRECATED:{type:"graphqlRef",data:i}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/16117-15af8fc125cebd19.mjs.map